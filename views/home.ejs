<%- include("partials/header"); -%>

<div class="mt-2 mb-5 container">
    <div class="row d-lg-none mb-2">
        <div class="col d-flex justify-content-start">
            <a class="link" href="/compose">+ Compose</a>
        </div>
      </div> 
    <div class="row">
        <div class="col">
            <h1 class="titles">Home</h1>
        </div>
    </div>
    <% if (posts.length === 0){ %>
        <div class="row">
            <div class="col empty-home justify-content-center" >
                <i class="fa-solid fa-empty-set"></i>
                Your journal is empty. Add your daily notes <a class="link empty-home-link" href="/compose">here +</a> 
            </div>
        </div>  
     <% }else { %>

        <div class="row">
            <div class="col">
                <div >
                    <% posts.forEach(function(post){ %>
                    <h3><%=post.title%></h3>
                    <p class="lastSeen">Last edited: <%=new Date(post.updatedAt).toLocaleDateString("en-US", {
                        weekday: "long",
                        day: "numeric",
                        month: "long", 
                        year: "numeric"
                    })%></p>
                    <p class="mb-5">
                        <%=post.content.substring(0,100) + " ...   " %>
                        <a class="link" href="/posts/<%=post._id%>">Read more</a>
                </p>
                <% }) %>
                </div>
            </div> 
        </div>
    <% } %>
</div>
        
<%- include("partials/footer"); -%>
